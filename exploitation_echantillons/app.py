from echantillon import Echantillon

class App:
    @staticmethod
    def verify_probability(probability):
        """Vérifie si la probabilité est bien contenue entre 0 et 100"""
        try:
            prob = float(probability)
            if 0 <= prob <= 100:
                return prob / 100
            else:
                print("")
                print("Veuillez saisir une probabilité entre 0 et 100")
                App.creation_mutation_menu()
        except ValueError:
            print("")
            print("Veuillez entrer un nombre valide")
            App.creation_mutation_menu()

    @staticmethod
    def creation_mutation_menu():
        print("╔════════════════════════════════════════════════════════════════╗")
        print("║                 Création & Mutation Séquence                   ║")
        print("╠════════════════════════════════════════════════════════════════╣")
        print("║   Veuillez choisir une méthode à utiliser :                    ║")
        print("╠════════════════════════════════════════════════════════════════╣")
        print("║  A. Créer une séquence                                         ║")
        print("║  B. Mutation de remplacement                                   ║")
        print("║  C. Mutation de délétion                                       ║")
        print("║  D. Mutation d'insertion                                       ║")
        print("║  E. Mutation                                                   ║")
        print("║  F. Retour                                                     ║")
        print("╚════════════════════════════════════════════════════════════════╝ \n")
        entry_seq = input()
        entry_seq = entry_seq.lower()
        match entry_seq:
            case "a":
                entry = input("Entrez la longueur de la séquence à créer : ")
                try:
                    print(Echantillon.create_sequence(int(entry)))
                except ValueError:
                    print("Veuillez entrer un nombre entier valide")
                    App.creation_mutation_menu()              
            case "b":
                sequence = input("Entrez la séquence à muter par remplacement de base : ")
                probability = input("Entrez la probabilité de mutation en pourcentage : ")
                App.verify_probability(probability)
                print(Echantillon.mutation_replacement(sequence, probability))

            case "c":
                sequence = input("Entrez la séquence à muter par suppression de base : ")
                probability = input("Entrez la probabilité de mutation en pourcentage : ")
                App.verify_probability(probability)
                print(Echantillon.mutation_deletion(sequence, probability))
                
            case "d":
                sequence = input("Entrez la séquence à muter par ajout de base : ")
                probability = input("Entrez la probabilité de mutation en pourcentage : ")
                App.verify_probability(probability)
                print(Echantillon.mutation_insertion(sequence, probability))
                
            case "e":
                sequence = input("Entrez la séquence à muter : ")
                replacement_probability = input("Entrez la probabilité de mutation par remplacement en pourcentage : ")
                insertion_probability = input("Entrez la probabilité de mutation par insertion en pourcentage : ")
                deletion_probability = input("Entrez la probabilité de mutation par suppression en pourcentage : ")
                
                App.verify_probability(replacement_probability)
                App.verify_probability(insertion_probability)
                App.verify_probability(deletion_probability)
                
                print(Echantillon.mutation(sequence, replacement_probability, insertion_probability, deletion_probability))
                
            case "f":
                App.start_app()
            case _:
                print("Veuillez saisir une entrée figurant dans la liste d'actions")
                App.creation_mutation_menu()

    @staticmethod
    def quit():
        print("╔════════════════════════════════════════════════════════════════╗")
        print("║              Merci d'avoir utilisé Labo Din'O !                ║")
        print("╚════════════════════════════════════════════════════════════════╝ \n")
        

    @staticmethod
    def start_app():
        print("╔════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗")
        print("║     /\__\     /\  \         /\  \         /\  \                  /\  \          ___        /\__\         /\  \     ║")
        print("║    /:/  /    /::\  \       /::\  \       /::\  \                /::\  \        /\  \      /::|  |       /::\  \    ║")
        print("║   /:/  /    /:/\:\  \     /:/\:\  \     /:/\:\  \              /:/\:\  \       \:\  \    /:|:|  |      /:/\:\  \   ║")
        print("║  /:/  /    /::\~\:\  \   /::\~\:\__\   /:/  \:\  \            /:/  \:\__\      /::\__\  /:/|:|  |__   /:/  \:\  \  ║")
        print("║ /:/__/    /:/\:\ \:\__\ /:/\:\ \:|__| /:/__/ \:\__\          /:/__/ \:|__|  __/:/\/__/ /:/ |:| /\__\ /:/__/ \:\__\ ║")
        print("║ \:\  \    \/__\:\/:/  / \:\~\:\/:/  / \:\  \ /:/  /          \:\  \ /:/  / /\/:/  /    \/__|:|/:/  / \:\  \ /:/  / ║")
        print("║  \:\  \        \::/  /   \:\ \::/  /   \:\  /:/  /            \:\  /:/  /  \::/__/         |:/:/  /   \:\  /:/  /  ║")
        print("║   \:\  \       /:/  /     \:\/:/  /     \:\/:/  /              \:\/:/  /    \:\__\         |::/  /     \:\/:/  /   ║")
        print("║    \:\__\     /:/  /       \::/  /       \::/  /                \::/  /      \/__/         /:/  /       \::/  /    ║")
        print("║     \/__/     \/__/         \/__/         \/__/                  \/__/                     \/__/         \/__/     ║")
        print("╠════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣")
        print("║   Veuillez choisir une catégorie à utiliser :                                                                       ║")
        print("╠════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣")
        print("║  A. Création & Mutation Séquence                                                                                   ║")
        print("║  B. Vendeur                                                                                                        ║")
        print("║  C. Administrateur                                                                                                 ║")
        print("║  D. Quitter                                                                                                        ║")
        print("╚════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝ \n")

        entry = input()
        entry = entry.lower()
        match entry:
            case "a":
                App.creation_mutation_menu()
            case "d":
                App.quit()
            case _:
                print("Veuillez saisir une entrée figurant dans la liste d'actions")
                App.start_app()

    

    