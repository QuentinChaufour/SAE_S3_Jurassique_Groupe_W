from exploitation_echantillons.constants import NUCLEOTIDES

class Echantillon:

    @staticmethod
    def create_sequence(size: int) -> str:
        """
            Crée une séquence d'ADN aléatoire de taille donnée.

            Param size: Taille de la séquence à créer.
            Return : Une chaîne de caractères représentant la séquence d'ADN.
        """
        import random
        # Initialisation de la séquence vide
        sequence : str = ''
        # Génération de la séquence aléatoire grâce au module random
        for _ in range(size):
            sequence += random.choice(NUCLEOTIDES)
        
        return sequence
    
    def mutation_replacement(sequence: str, mut_probability: float) -> str:
        """
            Applique une mutation de remplacement sur une séquence d'ADN avec une certaine probabilité p.

            Param sequence: La séquence d'ADN à muter.
            Param mut_probability: La probabilité de remplacement pour chaque nucléotide (entre 0 et 1).
            Return : La séquence mutée.
        """
        import random
        mutated_sequence = ''
        
        for nucleotide in sequence:
            if random.uniform(0, 1) < mut_probability:
                # Choisir un nouveau nucléotide différent de l'original
                possible_nucleotides = [nucleos for nucleos in NUCLEOTIDES if nucleos != nucleotide]
                new_nucleotide = random.choice(possible_nucleotides)
                mutated_sequence += new_nucleotide
            else:
                mutated_sequence += nucleotide
        
        return mutated_sequence

def main():
    # Création d'un échantillon de taille 10
    echantillon = Echantillon.create_sequence(100)
    print(echantillon)

if __name__ == "__main__":
    main()